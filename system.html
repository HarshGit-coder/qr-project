<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>System Details</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <h2>System Details</h2>
      <div id="system-details">Loading...</div>
    </div>

    <script>
      // Helper to get ?id=SYS001 from URL
      function getSystemIdFromUrl() {
        const params = new URLSearchParams(window.location.search);
        return params.get("id"); // e.g., "SYS001"
      }

      async function loadSystemData() {
        const systemId = getSystemIdFromUrl();
        if (!systemId) {
          document.getElementById("system-details").innerHTML =
            "No system ID provided in URL.";
          return;
        }

        try {
          // Load JSON data
          const response = await fetch(
            "https://harshgit-coder.github.io/qr-project/data.json"
          );
          const data = await response.json();

          // Find the system by ID
          // Find the equipment by ID instead of "System ID"
          const system = data.find((item) => item.id === systemId);

          if (!system) {
            document.getElementById("system-details").innerHTML =
              "System not found!";
            return;
          }

          // Display system details
          const detailsHtml = `
  <table>
    <tr><th>Equipment ID</th><td>${system.sl_no}</td></tr>
    <tr><th>Make & Model</th><td>${system.make_model}</td></tr>
    <tr><th>Year of Mfg</th><td>${system.year_of_manufacturing}</td></tr>
    <tr><th>Third Party Agency</th><td>${system.third_party_inspection_agency}</td></tr>
    <tr><th>TPI Validity</th><td>${system.tpi_validity}</td></tr>
    <tr><th>Inspection Frequency</th><td>${system.internal_inspection_frequency}</td></tr>
    <tr><th>Safe Working Load</th><td>${system.safe_working_load}</td></tr>
    <tr><th>Location</th><td>${system.location_city}</td></tr>
    <tr><th>Project Name</th><td>${system.project_name}</td></tr>
    <tr><th>Ownership</th><td>${system.ownership}</td></tr>
    <tr><th>Condition</th><td>${system.physical_condition}</td></tr>
  </table>
`;


          document.getElementById("system-details").innerHTML = detailsHtml;
        } catch (err) {
          console.error(err);
          document.getElementById("system-details").innerHTML =
            "Error loading system data.";
        }
      }

      loadSystemData();
    </script>
  </body>
</html>
